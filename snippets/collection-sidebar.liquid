{%- if sidebar_type == 'vertical' -%}
  {%- for block in section.blocks -%}
    {%- if block.type == 'category' -%}
      {% render 'halo-side-all-categories',
        block: block,
        show_collapse: show_collapse,
        sidebar_collapse: sidebar_collapse
      %}
    {%- endif -%}
  {%- endfor -%}
{%- endif -%}
{%- if show_filter -%}
  {{ 'component-filter.css' | asset_url | stylesheet_tag }}
  <div class="collection-filters" id="main-collection-filters" data-id="{{ section.id }}">
    <script type="text/javascript">
      window.show_storefront_filter = true;
    </script>

    {%- liquid
      assign file_extension = 'png'
      assign filter_by_tags = section.blocks | where: 'type', 'filter'
      if results.url
        assign results_url = results.url
      else
        assign terms = results.terms | escape
        assign results_url = '?q=' | append: terms | append: '&type=product&sort_by=' | append: sort_by
      endif
      assign total_active_values = 0
      for filter in results.filters
        for value in filter.active_values
          assign total_active_values = total_active_values | plus: 1
        endfor
      endfor
      assign filter_swatch = filter_swatch | split: ',' | strip | downcase | handle
      assign filter_rectangle = filter_rectangle | split: ',' | strip | downcase | handle
      assign maxItemToShow = section.settings.max_item_per_filter
    -%}
    <collection-filters-form
      class="facets facets-{{ sidebar_type }} filter-display-{{ section.settings.filter_display_type }}"
      data-filter-display="{{ section.settings.filter_display_type }}"
    >
      <form id="CollectionFiltersForm" class="facets__form">
        {%- if results.terms -%}
          <input type="hidden" name="q" value="{{ results.terms | escape }}">
          <input type="hidden" name="type" value="product">
          <input type="hidden" name="options[prefix]" value="last">
        {%- endif -%}
        <div
          class="sidebarBlock refined-widgets js-filter"
          {% if total_active_values == 0 %}
            style="display: none;"
          {% endif %}
          data-index="0"
        >
          <h2 class="sidebarBlock-heading">
            <span class="facets__text">{{ 'sections.collection_template.refined_by' | t }}</span>
            <a
              href="{{ results_url }}"
              class="active-facets__button facets__clear-all link link-underline js-facet-remove"
              ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
            >
          </h2>
          <div class="results-count">
            <span class="results" style="display: none;"
              ><span class="count">{{ collection.products_count }}</span>
              {{ 'sections.collection_template.results' | t -}}
            </span>
          </div>
          <div class="sidebarBlock-content sidebarBlock-content--list">
            <a
              href="{{ results_url }}"
              class="active-facets__button facets__clear-all link link-underline js-facet-remove"
              ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
            >
            <ul class="facets__list--refined list-unstyled" role="list">
              {%- for filter in results.filters -%}
                {%- for value in filter.active_values -%}
                  <li>
                    <facet-remove
                      ><a class="active-facets__button js-facet-remove" href="{{ value.url_to_remove }}"
                        ><span class="text">{{ value.label | escape }}</span><span class="close"></span></a
                    ></facet-remove>
                  </li>
                {%- endfor -%}
                {%- if filter.type == 'price_range' -%}
                  {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                    <li>
                      <facet-remove>
                        <a class="active-facets__button js-facet-remove" href="{{ filter.url_to_remove }}">
                          <span class="text">
                            {%- if filter.min_value.value -%}
                              {{ filter.min_value.value | money -}}
                            {%- else -%}
                              {{- 0 | money }}
                            {%- endif -%}
                            <span class="separate"> - </span>
                            {%- if filter.max_value.value -%}
                              {{ filter.max_value.value | money -}}
                            {%- else -%}
                              {{- filter.range_max | money }}
                            {%- endif -%}
                          </span>
                          <span class="close"></span>
                        </a>
                      </facet-remove>
                    </li>
                  {%- endif -%}
                {%- endif -%}
              {%- endfor -%}
            </ul>
          </div>
        </div>
        {%- if results.current_vendor or results.current_type -%}
          <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
        {%- endif -%}
        <div class="collection-filters__item facets__wrapper">
          {%- if sidebar_type == 'horizontal' -%}
            <div class="widget_filter" style="display: none;">
              <span class="icon-filter1">{% render 'icon-filter-2' %}</span
              ><span class="sidebar_more">{{ 'sections.collection_template.refined_by' | t }}</span>
            </div>
          {%- endif -%}
          {%- for filter in results.filters -%}
            {%- assign total_active_values = total_active_values | plus: filter.active_values.size -%}
            {%- case filter.type -%}
              {%- when 'list' -%}
                {%- liquid
                  assign filterLabel = filter.label | escape
                  assign filterLabelAll = section.settings.filter_label_all | default: 'More filters'

                  if filterLabel == filterLabelAll
                    assign filter_hidden_tag_list = section.settings.filter_hidden_tag_list | split: ','
                  endif
                -%}
                {%- if filterLabel == filterLabelAll and filter_by_tags.size > 0 -%}
                  {%- liquid
                    assign countTag = 0
                    assign indexTag = forloop.index
                    assign listRemainingTags = ''
                  -%}
                  {%- for block in filter_by_tags -%}
                    {%- liquid
                      assign listTagHeading = block.settings.heading | default: filterLabel
                      assign listTags = block.settings.list_tags | split: ','
                      assign listTagsRender = ''
                      for value in filter.values
                        assign item = value.value
                        unless listTagsRender contains item
                          if listTags contains item
                            assign listTagsRender = listTagsRender | append: item | append: ','
                            assign listRemainingTags = listRemainingTags | append: item | append: ','
                          endif
                        endunless
                      endfor
                    -%}
                    {%- if listTagsRender != blank -%}
                      {%- liquid
                        assign countTag = countTag | plus: 1
                        assign listTagsRenderSize = listTagsRender | split: ',' | size
                        assign listTagsRender = listTagsRender | split: ','
                        assign countTagActive = 0
                        for value in filter.active_values
                          if listTagsRender contains value.value
                            assign countTagActive = countTagActive | plus: 1
                          endif
                        endfor
                      -%}
                      <div
                        class="sidebarBlock js-filter {{ listTagsRenderSize }}"
                        data-index="{{ indexTag | append: forloop.index }}"
                        data-type-list="true"
                      >
                        {%- if show_collapse -%}
                          <div class="sidebarBlock-headingWrapper">
                        {%- endif -%}
                        <h2 class="sidebarBlock-heading{% if show_collapse %}{% if sidebar_collapse == 'expand' %} is-clicked{% endif %}{% endif %}">
                          <span class="facets__text">{{ listTagHeading | escape }}</span>
                          <span
                            class="facets__count{% if sidebar_type == 'horizontal' %}{% if countTagActive > 0 %} custom-count{% endif %}{% endif %}"
                            aria-hidden="true"
                          >
                            {%- if sidebar_type == 'horizontal' -%}
                              {%- if countTagActive > 0 -%}
                                <span>{{ countTagActive }}</span>
                              {%- endif -%}
                            {% elsif sidebar_type == 'vertical' %}
                              {%- if countTagActive > 0 -%}({{ countTagActive }}){%- endif -%}
                            {%- endif -%}
                          </span>
                        </h2>
                        {%- if show_collapse -%}
                          </div>
                          <div
                            class="sidebarBlock-contentWrapper"
                            {% if sidebar_collapse == 'expand' %}
                              style="display: block;"
                            {% endif %}
                          >
                        {%- endif -%}
                        <div class="sidebarBlock-content sidebarBlock-content--full facets__display">
                          <ul
                            class="facets__list custom-scrollbar list-unstyled"
                            role="list"
                            data-max-items="{{ maxItemToShow }}"
                            data-name="{{ listTagHeading | escape }}"
                          >
                            {%- liquid
                              assign label = listTagHeading | downcase | handle
                              assign valueIndex = 0
                            -%}
                            {%- for value in filter.values -%}
                              {%- if listTagsRender contains value.value -%}
                                {%- assign valueIndex = valueIndex | plus: 1 -%}
                                <li class="list-menu__item facets__item {% if valueIndex > maxItemToShow and section.settings.filter_display_type == 'show-more' %}d-none{% endif %}{% if filter_swatch contains label %} facets__item--swatch{% elsif filter_rectangle contains label %} facets__item--rectangle{% endif %}">
                                  <input
                                    type="checkbox"
                                    name="{{ value.param_name }}"
                                    value="{{ value.value }}"
                                    id="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}"
                                    {% if value.active %}
                                      checked
                                    {% endif %}
                                    {% if value.count == 0 and value.active == false %}
                                      disabled
                                    {% endif %}
                                  >
                                  {%- if filter_swatch contains label -%}
                                    <label
                                      for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}"
                                      class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                      title="{{ value.label | escape }}"
                                    >
                                      <span
                                        class="pattern{% if value.value == 'white' or value.value == 'White' %} pattern--white{% endif %}"
                                        style="
                                          {%- if filter_swatch_type == 'png' %}
                                          background-color: {{ value.value | split: ' ' | last | handle }};
                                          background-image: url({{ value.value | strip | handleize | handle | append: '.' | append: file_extension | file_url }})
                                          {%- else -%}
                                           background-color: {{ value.value | split: ' ' | last | handle }};
                                          {% endif %}
                                        "
                                      >
                                      </span
                                      ><span class="visually-hidden">{{ value.label | escape }}</span>
                                    </label>
                                  {%- elsif filter_rectangle contains label -%}
                                    <label
                                      for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}"
                                      class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                      ><span class="text">{{ value.label | escape }}</span></label
                                    >
                                  {%- else -%}
                                    <label
                                      for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}"
                                      class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %} form-label--checkbox"
                                    >
                                      {{- value.label | escape }}
                                      <span class="count">({{ value.count }})</span></label
                                    >
                                  {%- endif -%}
                                </li>
                              {%- endif -%}
                            {%- endfor -%}
                          </ul>
                          <a
                            href="{{ filter.url_to_remove }}"
                            class="facets__reset link link-underline js-facet-remove"
                            data-index="{{ indexTag | append: forloop.index }}"
                            {% if countTagActive == 0 %}
                              style="display: none;"
                            {% endif %}
                            ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
                          >
                          {%- if sidebar_type == 'horizontal' -%}
                            {%- if section.settings.filter_display_type == 'show-more' -%}
                              {%- if listTagsRenderSize > maxItemToShow -%}
                                <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                                  <span class="icon-container">{% render 'icon-show-more' %}</span>
                                  <span class="btn-text"
                                    ><span data-show-more-content>
                                      {{- 'sections.collection_template.show_all' | t -}}
                                    </span></span
                                  >
                                </div>
                              {%- endif -%}
                            {%- endif -%}
                          {%- endif -%}
                        </div>
                        {%- if show_collapse -%}
                          </div>
                        {%- endif -%}
                        {%- unless sidebar_type == 'horizontal' -%}
                          {%- if section.settings.filter_display_type == 'show-more' -%}
                            {%- if listTagsRenderSize > maxItemToShow -%}
                              <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                                <span class="icon-container">{% render 'icon-show-more' %}</span>
                                <span class="btn-text"
                                  ><span data-show-more-content>
                                    {{- 'sections.collection_template.show_all' | t -}}
                                  </span></span
                                >
                              </div>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endunless -%}
                      </div>
                    {%- endif -%}
                  {%- endfor -%}
                  {%- if countTag > 0 -%}
                    {%- if listRemainingTags != blank -%}
                      {%- liquid
                        assign listTagsRenderSize = listRemainingTags | split: ',' | size
                        assign listTagsRenderSize = filter.values.size | minus: listTagsRenderSize
                        assign listRemainingTags = listRemainingTags | split: ','
                        assign listAllTags = filter.values | map: 'value'
                        assign forloopIndex = countTag | plus: 1
                        assign countTagActive = 0
                        for value in filter.active_values
                          unless listRemainingTags contains value.value
                            if listAllTags contains value.value
                              assign countTagActive = countTagActive | plus: 1
                            endif
                          endunless
                        endfor
                      -%}
                      <div
                        class="sidebarBlock js-filter {{ filter.label | escape }}"
                        data-index="{{ indexTag | append: forloopIndex }}"
                        data-type-list="true"
                      >
                        {%- if show_collapse -%}
                          <div class="sidebarBlock-headingWrapper">
                        {%- endif -%}
                        <h2 class="sidebarBlock-heading{% if show_collapse %}{% if sidebar_collapse == 'expand' %} is-clicked{% endif %}{% endif %}">
                          <span class="facets__text">{{ filter.label | escape }}</span>
                          <span
                            class="facets__count{% if sidebar_type == 'horizontal' %}{% if countTagActive > 0 %} custom-count{% endif %}{% endif %}"
                            aria-hidden="true"
                          >
                            {%- if sidebar_type == 'horizontal' -%}
                              {%- if countTagActive > 0 -%}
                                <span>{{ countTagActive }}</span>
                              {%- endif -%}
                            {% elsif sidebar_type == 'vertical' %}
                              {%- if countTagActive > 0 -%}({{ countTagActive }}){%- endif -%}
                            {%- endif -%}
                          </span>
                        </h2>
                        {%- if show_collapse -%}
                          </div>
                          <div
                            class="sidebarBlock-contentWrapper"
                            {% if sidebar_collapse == 'expand' %}
                              style="display: block;"
                            {% endif %}
                          >
                        {%- endif -%}
                        <div class="sidebarBlock-content sidebarBlock-content--full facets__display">
                          <ul
                            class="facets__list custom-scrollbar list-unstyled"
                            role="list"
                            data-max-items="{{ maxItemToShow }}"
                          >
                            {%- liquid
                              assign label = filter.label | downcase | handle
                              assign valueIndex = 0
                            -%}
                            {%- for value in filter.values -%}
                              {%- unless listRemainingTags contains value.value -%}
                                {%- if filter_hidden_tag_list == blank -%}
                                  {%- assign valueIndex = valueIndex | plus: 1 -%}
                                  <li class="list-menu__item facets__item {% if valueIndex > maxItemToShow and section.settings.filter_display_type == 'show-more' %}d-none{% endif %}{% if filter_swatch contains label %} facets__item--swatch{% elsif filter_rectangle contains label %} facets__item--rectangle{% endif %}">
                                    <input
                                      type="checkbox"
                                      name="{{ value.param_name }}"
                                      value="{{ value.value }}"
                                      id="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                      {% if value.active %}
                                        checked
                                      {% endif %}
                                      {% if value.count == 0 and value.active == false %}
                                        disabled
                                      {% endif %}
                                    >
                                    {%- if filter_swatch contains label -%}
                                      <label
                                        for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                        class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                        title="{{ value.label | escape }}"
                                      >
                                        <span
                                          class="pattern{% if value.value == 'white' or value.value == 'White' %} pattern--white{% endif %}"
                                          style="{% if filter_swatch_type == 'png' %}background-color: {{ value.value | split: ' ' | last | handle }};background-image: url({{ value.value | strip | handleize | handle | append: '.' | append: file_extension | file_url }}){% else %}background-color: {{ value.value | split: ' ' | last | handle }}{% endif %}"
                                        ></span>
                                        <span class="visually-hidden">{{ value.label | escape }}</span>
                                      </label>
                                    {%- elsif filter_rectangle contains label -%}
                                      <label
                                        for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                        class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                        ><span class="text">{{ value.label | escape }}</span></label
                                      >
                                    {%- else -%}
                                      <label
                                        for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                        class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %} form-label--checkbox"
                                      >
                                        {{- value.label | escape -}}
                                        <span class="count">({{ value.count }})</span></label
                                      >
                                    {%- endif -%}
                                  </li>
                                {%- else -%}
                                  {%- unless filter_hidden_tag_list contains value.value -%}
                                    {%- assign valueIndex = valueIndex | plus: 1 -%}
                                    <li class="list-menu__item facets__item {% if valueIndex > maxItemToShow and section.settings.filter_display_type == 'show-more' %}d-none{% endif %}{% if filter_swatch contains label %} facets__item--swatch{% elsif filter_rectangle contains label %} facets__item--rectangle{% endif %}">
                                      <input
                                        type="checkbox"
                                        name="{{ value.param_name }}"
                                        value="{{ value.value }}"
                                        id="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                        {% if value.active %}
                                          checked
                                        {% endif %}
                                        {% if value.count == 0 and value.active == false %}
                                          disabled
                                        {% endif %}
                                      >
                                      {%- if filter_swatch contains label -%}
                                        <label
                                          for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                          class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                          title="{{ value.label | escape }}"
                                        >
                                          <span
                                            class="pattern{% if value.value == 'white' or value.value == 'White' %} pattern--white{% endif %}"
                                            style="{% if filter_swatch_type == 'png' %}background-color: {{ value.value | split: ' ' | last | handle }};background-image: url({{ value.value | strip | handleize | handle | append: '.' | append: file_extension | file_url }}){% else %}background-color: {{ value.value | split: ' ' | last | handle }}{% endif %}"
                                          ></span>
                                          <span class="visually-hidden">{{ value.label | escape }}</span>
                                        </label>
                                      {%- elsif filter_rectangle contains label -%}
                                        <label
                                          for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                          class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                          ><span class="text">{{ value.label | escape }}</span></label
                                        >
                                      {%- else -%}
                                        <label
                                          for="Filter-{{ filter.label | escape | handleize }}-{{ indexTag | append: forloop.index }}-remain"
                                          class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %} form-label--checkbox"
                                        >
                                          {{- value.label | escape -}}
                                          <span class="count">({{ value.count }})</span></label
                                        >
                                      {%- endif -%}
                                    </li>
                                  {%- endunless -%}
                                {%- endif -%}
                              {%- endunless -%}
                            {%- endfor -%}
                          </ul>
                          <a
                            href="{{ filter.url_to_remove }}"
                            class="facets__reset link link-underline js-facet-remove"
                            data-index="{{ forloop.index }}"
                            {% if countTagActive == 0 %}
                              style="display: none;"
                            {% endif %}
                            ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
                          >
                          {%- if sidebar_type == 'horizontal' -%}
                            {%- if section.settings.filter_display_type == 'show-more' -%}
                              {%- if listTagsRenderSize > maxItemToShow -%}
                                <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                                  <span class="icon-container">{% render 'icon-show-more' %}</span>
                                  <span class="btn-text"
                                    ><span data-show-more-content>
                                      {{- 'sections.collection_template.show_all' | t -}}
                                    </span></span
                                  >
                                </div>
                              {%- endif -%}
                            {%- endif -%}
                          {%- endif -%}
                        </div>
                        {%- if show_collapse -%}
                          </div>
                        {%- endif -%}
                        {%- unless sidebar_type == 'horizontal' -%}
                          {%- if section.settings.filter_display_type == 'show-more' -%}
                            {%- if listTagsRenderSize > maxItemToShow -%}
                              <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                                <span class="icon-container">{% render 'icon-show-more' %}</span>
                                <span class="btn-text"
                                  ><span data-show-more-content>
                                    {{- 'sections.collection_template.show_all' | t -}}
                                  </span></span
                                >
                              </div>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endunless -%}
                      </div>
                    {%- endif -%}
                  {%- else -%}
                    <div
                      class="sidebarBlock js-filter {{ filter.label | escape }}"
                      data-index="{{ forloop.index }}"
                      data-type-list="true"
                    >
                      {%- if show_collapse -%}
                        <div class="sidebarBlock-headingWrapper">
                      {%- endif -%}
                      <h2 class="sidebarBlock-heading{% if show_collapse %}{% if sidebar_collapse == 'expand' %} is-clicked{% endif %}{% endif %}">
                        <span class="facets__text">{{ filter.label | escape }}</span>
                        <span
                          class="facets__count{% if sidebar_type == 'horizontal' %}{% if filter.active_values.size > 0 %} custom-count{% endif %}{% endif %}"
                          aria-hidden="true"
                        >
                          {%- if sidebar_type == 'horizontal' -%}
                            {%- if filter.active_values.size > 0 -%}
                              <span>{{ filter.active_values.size }}</span>
                            {%- endif -%}
                          {% elsif sidebar_type == 'vertical' %}
                            {%- if filter.active_values.size > 0 -%}({{ filter.active_values.size }}){%- endif -%}
                          {%- endif -%}
                        </span>
                      </h2>
                      {%- if show_collapse -%}
                        </div>
                        <div
                          class="sidebarBlock-contentWrapper"
                          {% if sidebar_collapse == 'expand' %}
                            style="display: block;"
                          {% endif %}
                        >
                      {%- endif -%}
                      <div class="sidebarBlock-content sidebarBlock-content--full facets__display">
                        <ul
                          class="facets__list custom-scrollbar list-unstyled"
                          role="list"
                          data-max-items="{{ maxItemToShow }}"
                        >
                          {%- liquid
                            assign label = filter.label | downcase | handle
                            assign filter_swatch = filter_swatch | split: ',' | strip | downcase | handle
                            assign filter_rectangle = filter_rectangle | split: ',' | strip | downcase | handle
                          -%}
                          {%- for value in filter.values -%}
                            <li class="list-menu__item facets__item {% if forloop.index > maxItemToShow and section.settings.filter_display_type == 'show-more' %}d-none{% endif %}{% if filter_swatch contains label %} facets__item--swatch{% elsif filter_rectangle contains label %} facets__item--rectangle{% endif %}">
                              <input
                                type="checkbox"
                                name="{{ value.param_name }}"
                                value="{{ value.value }}"
                                id="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                {% if value.active %}
                                  checked
                                {% endif %}
                                {% if value.count == 0 and value.active == false %}
                                  disabled
                                {% endif %}
                              >
                              {%- if filter_swatch contains label -%}
                                <label
                                  for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                  class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                  title="{{ value.label | escape }}"
                                >
                                  <span
                                    class="pattern{% if value.value == 'white' or value.value == 'White' %} pattern--white{% endif %}"
                                    style="{% if filter_swatch_type == 'png' %}background-color: {{ value.value | split: ' ' | last | handle }};background-image: url({{ value.value | strip | handleize | handle | append: '.' | append: file_extension | file_url }}){% else %}background-color: {{ value.value | split: ' ' | last | handle }}{% endif %}"
                                  ></span>
                                  <span class="visually-hidden">{{ value.label | escape }}</span>
                                </label>
                              {%- elsif filter_rectangle contains label -%}
                                <label
                                  for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                  class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                  ><span class="text">{{ value.label | escape }}</span></label
                                >
                              {%- else -%}
                                <label
                                  for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                  class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %} form-label--checkbox"
                                >
                                  {{- value.label | escape -}}
                                  <span class="count">({{ value.count }})</span></label
                                >
                              {%- endif -%}
                            </li>
                          {%- endfor -%}
                        </ul>
                        <a
                          href="{{ filter.url_to_remove }}"
                          class="facets__reset link link-underline js-facet-remove"
                          data-index="{{ forloop.index }}"
                          {% if filter.active_values.size == 0 %}
                            style="display: none;"
                          {% endif %}
                          ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
                        >
                        {%- if sidebar_type == 'horizontal' -%}
                          {%- if section.settings.filter_display_type == 'show-more' -%}
                            {%- if filter.values.size > maxItemToShow -%}
                              <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                                <span class="icon-container">{% render 'icon-show-more' %}</span>
                                <span class="btn-text"
                                  ><span data-show-more-content>
                                    {{- 'sections.collection_template.show_all' | t -}}
                                  </span></span
                                >
                              </div>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endif -%}
                      </div>
                      {%- if show_collapse -%}
                        </div>
                      {%- endif -%}
                      {%- unless sidebar_type == 'horizontal' -%}
                        {%- if section.settings.filter_display_type == 'show-more' -%}
                          {%- if filter.values.size > maxItemToShow -%}
                            <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                              <span class="icon-container">{% render 'icon-show-more' %}</span>
                              <span class="btn-text"
                                ><span data-show-more-content>
                                  {{- 'sections.collection_template.show_all' | t -}}
                                </span></span
                              >
                            </div>
                          {%- endif -%}
                        {%- endif -%}
                      {%- endunless -%}
                    </div>
                  {%- endif -%}
                {%- else -%}
                  <div
                    class="sidebarBlock js-filter {{ filter.label | escape }}"
                    data-index="{{ forloop.index }}"
                    data-type-list="true"
                  >
                    {%- if show_collapse -%}
                      <div class="sidebarBlock-headingWrapper">
                    {%- endif -%}
                    <h2 class="sidebarBlock-heading{% if show_collapse %}{% if sidebar_collapse == 'expand' %} is-clicked{% endif %}{% endif %}">
                      <span class="facets__text">{{ filter.label | escape }}</span>
                      <span
                        class="facets__count{% if sidebar_type == 'horizontal' %}{% if filter.active_values.size > 0 %} custom-count{% endif %}{% endif %}"
                        aria-hidden="true"
                      >
                        {%- if sidebar_type == 'horizontal' -%}
                          {%- if filter.active_values.size > 0 -%}
                            <span>{{ filter.active_values.size }}</span>
                          {%- endif -%}
                        {% elsif sidebar_type == 'vertical' %}
                          {%- if filter.active_values.size > 0 -%}({{ filter.active_values.size }}){%- endif -%}
                        {%- endif -%}
                      </span>
                    </h2>
                    {%- if show_collapse -%}
                      </div>
                      <div
                        class="sidebarBlock-contentWrapper"
                        {% if sidebar_collapse == 'expand' %}
                          style="display: block;"
                        {% endif %}
                      >
                    {%- endif -%}
                    <div class="sidebarBlock-content sidebarBlock-content--full facets__display">
                      <ul
                        class="facets__list custom-scrollbar list-unstyled"
                        role="list"
                        data-max-items="{{ maxItemToShow }}"
                      >
                        {%- liquid
                          assign label = filter.label | downcase | handle
                        -%}
                        {%- for value in filter.values -%}
                          <li class="list-menu__item facets__item {% if forloop.index > maxItemToShow and section.settings.filter_display_type == 'show-more' %}d-none{% endif %}{% if filter_swatch contains label %} facets__item--swatch{% elsif filter_rectangle contains label %} facets__item--rectangle{% endif %}">
                            <input
                              type="checkbox"
                              name="{{ value.param_name }}"
                              value="{{ value.value }}"
                              id="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                              {% if value.active %}
                                checked
                              {% endif %}
                              {% if value.count == 0 and value.active == false %}
                                disabled
                              {% endif %}
                            >
                            {%- if filter_swatch contains label -%}
                              <label
                                for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                title="{{ value.label | escape }}"
                              >
                                <span
                                  class="pattern{% if value.value == 'white' or value.value == 'White' %} pattern--white{% endif %}"
                                  style="{% if filter_swatch_type == 'png' %}background-color: {{ value.value | split: ' ' | last | handle }};background-image: url({{ value.value | strip | handleize | handle | append: '.' | append: file_extension | file_url }}){% else %}background-color: {{ value.value | split: ' ' | last | handle }}{% endif %}"
                                ></span>
                                <span class="visually-hidden">{{ value.label | escape }}</span>
                              </label>
                            {%- elsif filter_rectangle contains label -%}
                              <label
                                for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                ><span class="text">{{ value.label | escape }}</span></label
                              >
                            {%- else -%}
                              <label
                                for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %} form-label--checkbox"
                              >
                                {{- value.label | escape -}}
                                <span class="count">({{ value.count }})</span></label
                              >
                            {%- endif -%}
                          </li>
                        {%- endfor -%}
                      </ul>
                      <a
                        href="{{ filter.url_to_remove }}"
                        class="facets__reset link link-underline js-facet-remove"
                        data-index="{{ forloop.index }}"
                        {% if filter.active_values.size == 0 %}
                          style="display: none;"
                        {% endif %}
                        ><span class="text">{{ 'sections.collection_template.clear_all' | t }}</span></a
                      >
                      {%- if sidebar_type == 'horizontal' -%}
                        {%- if section.settings.filter_display_type == 'show-more' -%}
                          {%- if filter.values.size > maxItemToShow -%}
                            <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                              <span class="icon-container">{% render 'icon-show-more' %}</span>
                              <span class="btn-text"
                                ><span data-show-more-content>
                                  {{- 'sections.collection_template.show_all' | t -}}
                                </span></span
                              >
                            </div>
                          {%- endif -%}
                        {%- endif -%}
                      {%- endif -%}
                    </div>
                    {%- if show_collapse -%}
                      </div>
                    {%- endif -%}
                    {%- unless sidebar_type == 'horizontal' -%}
                      {%- if section.settings.filter_display_type == 'show-more' -%}
                        {%- if filter.values.size > maxItemToShow -%}
                          <div class="show-more--list_tags" data-show-more-btn="{{ filter.label | downcase }}">
                            <span class="icon-container">{% render 'icon-show-more' %}</span>
                            <span class="btn-text"
                              ><span data-show-more-content>
                                {{- 'sections.collection_template.show_all' | t -}}
                              </span></span
                            >
                          </div>
                        {%- endif -%}
                      {%- endif -%}
                    {%- endunless -%}
                  </div>
                {%- endif -%}
              {%- when 'price_range' -%}
                {% assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND'
                  | split: ','
                %}
                {% assign uses_comma_decimals = false %}
                {%- if currencies_using_comma_decimals contains cart.currency.iso_code -%}
                  {% assign uses_comma_decimals = true %}
                {%- endif -%}
                <div class="sidebarBlock js-filter" data-index="{{ forloop.index }}" data-type-price="true">
                  {%- if show_collapse -%}
                    <div class="sidebarBlock-headingWrapper">
                  {%- endif -%}
                  <h2 class="sidebarBlock-heading{% if show_collapse %}{% if sidebar_collapse == 'expand' %} is-clicked{% endif %}{% endif %}">
                    <span class="facets__text">{{ filter.label | escape }}</span>
                    <span class="facets__count" aria-hidden="true">
                      {%- if filter.active_values.size > 0 -%}({{ filter.active_values.size }}){%- endif -%}
                    </span>
                  </h2>
                  {%- if show_collapse -%}
                    </div>
                    <div
                      class="sidebarBlock-contentWrapper"
                      {% if sidebar_collapse == 'expand' %}
                        style="display: block;"
                      {% endif %}
                    >
                  {%- endif -%}
                  <div class="sidebarBlock-content sidebarBlock-content--full facets__display">
                    <price-range class="facets__price">
                      <div class="facets__price--slider">
                        <div class="facets__price--slide">
                          <input
                            class="filter__price_change filter__price_min"
                            min="0"
                            max="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                            step="1"
                            type="range"
                            {%- if filter.min_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' | replace: '.00', '' }}"
                              {%- else -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                              {% endif %}
                            {%- else -%}
                              value="0"
                            {%- endif -%}
                            aria-label="Min"
                          >
                          <input
                            class="filter__price_change filter__price_max"
                            min="0"
                            max="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                            step="1"
                            type="range"
                            {%- if filter.max_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' | replace: '.00', '' }}"
                              {%- else -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                              {% endif %}
                            {%- else -%}
                              value="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                            {%- endif -%}
                            aria-label="Max"
                          >
                        </div>
                        <div class="facets__price--box price-slider clearfix">
                          <div class="form-field">
                            <span class="field__currency format-currency">{{ cart.currency.symbol }}</span>
                            <span class="money format-money-input money--current-min hidden">
                              {%- if filter.min_value.value -%}
                                {{-
                                  filter.min_value.value
                                  | money_without_currency
                                  | replace: ',', ''
                                  | replace: '.00', ''
                                -}}
                              {%- else -%}
                                0
                              {%- endif -%}
                            </span>
                            <label
                              class="form-label hiddenLabels"
                              for="Filter-Min-{{ filter.label | escape }}-{{ forloop.index }}"
                            >
                              {{- 'sections.collection_template.min' | t -}}
                            </label>
                            <input
                              class="form-input field__input filter__price filter__price--min"
                              name="{{ filter.min_value.param_name }}"
                              id="Filter-Min-{{ filter.label | escape }}-{{ forloop.index }}"
                              {%- if filter.min_value.value -%}
                                {%- if uses_comma_decimals -%}
                                  value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' | replace: '.00', '' }}"
                                {%- else -%}
                                  value="{{ filter.min_value.value | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                                {% endif %}
                              {%- endif -%}
                              type="number"
                              min="0"
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                              placeholder="0"
                            >
                          </div>
                          <span class="price-to-price">{{ 'sections.collection_template.to' | t }}</span>
                          <div class="form-field">
                            <span class="field__currency format-currency">{{ cart.currency.symbol }}</span>
                            <span class="money format-money-input money--current-max hidden">
                              {%- if filter.max_value.value -%}
                                {{-
                                  filter.max_value.value
                                  | money_without_currency
                                  | replace: ',', ''
                                  | replace: '.00', ''
                                -}}
                              {%- else -%}
                                {{-
                                  filter.range_max
                                  | money_without_currency
                                  | replace: ',', ''
                                  | replace: '.00', ''
                                -}}
                              {%- endif -%}
                            </span>
                            <span
                              class="money format-money-input money--max hidden"
                              data-default-max="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                            >
                              {{- filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' -}}
                            </span>
                            <label
                              class="form-label hiddenLabels"
                              for="Filter-Max-{{ filter.label | escape }}-{{ forloop.index }}"
                            >
                              {{- 'sections.collection_template.max' | t -}}
                            </label>
                            <input
                              class="form-input field__input filter__price filter__price--max"
                              name="{{ filter.max_value.param_name }}"
                              id="Filter-Max-{{ filter.label | escape }}-{{ forloop.index }}"
                              {%- if filter.max_value.value -%}
                                {%- if uses_comma_decimals -%}
                                  value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' | replace: '.00', '' }}"
                                {%- else -%}
                                  value="{{ filter.max_value.value | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                                {% endif %}
                              {%- endif -%}
                              type="number"
                              min="0"
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                              placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' | replace: '.00', '' }}"
                            >
                          </div>
                        </div>
                        <div class="form-actions">
                          <input
                            class="button button--primary filter__price--apply"
                            type="button"
                            id="filter__price--apply"
                            value="{{ 'sections.collection_template.apply' | t }}"
                          >
                        </div>
                      </div>
                    </price-range>
                  </div>
                  {%- if show_collapse -%}
                    </div>
                  {%- endif -%}
                </div>
            {%- endcase -%}
          {%- endfor -%}
          <noscript>
            <button type="submit" class="facets__button button">
              {{ 'sections.collection_template.filter_button' | t }}
            </button>
          </noscript>
        </div>
        {%- if show_sorting -%}
          <div class="collection-filters__item sorting" style="display: none;">
            <div class="collection-filters__field">
              <label class="collection-filters__label" for="SortBy">
                {{- 'sections.collection_template.sort_by_label' | t -}}
              </label>
              <div class="select">
                {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                <select
                  name="sort_by"
                  class="select__select collection-filters__sort"
                  id="SortBy"
                  aria-describedby="a11y-refresh-page-message"
                >
                  {%- for option in results.sort_options -%}
                    <option
                      value="{{ option.value | escape }}"
                      {% if option.value == sort_by %}
                        selected="selected"
                      {% endif %}
                    >
                      {{ option.name | escape }}
                    </option>
                  {%- endfor -%}
                </select>
                {% render 'icon-caret' %}
              </div>
            </div>
            <noscript
              ><button type="submit" class="button button--small">
                {{ 'sections.collection_template.sort_button' | t }}
              </button></noscript
            >
          </div>
        {%- endif -%}
      </form>
      <toolbar-item class="toolbar" data-toolbar="" data-id="template--23338727342396__product-grid">
        <div class="toolbar-wrapper toolbar-mobile scroll-trigger animate--slide-in">
          <div class="toolbar-item toolbar-sidebar" data-sidebar="">
            <span class="toolbar-icon icon-filter">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 368.167 368.167"
                aria-hidden="true"
                focusable="false"
                role="presentation"
                class="icon icon-sidebar"
              >
                <path d="M248.084,96.684h12c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8h-12c-4.4,0-8,3.6-8,8C240.084,93.084,243.684,96.684,248.084,96.684 z"></path><path d="M366.484,25.484c-2.8-5.6-8.4-8.8-14.4-8.8h-336c-6,0-11.6,3.6-14.4,8.8c-2.8,5.6-2,12,1.6,16.8l141.2,177.6v115.6 c0,6,3.2,11.2,8.4,14c2.4,1.2,4.8,2,7.6,2c3.2,0,6.4-0.8,9.2-2.8l44.4-30.8c6.4-4.8,10-12,10-19.6v-78.8l140.8-177.2 C368.484,37.484,369.284,31.084,366.484,25.484z M209.684,211.884c-0.8,1.2-1.6,2.8-1.6,4.8v81.2c0,2.8-1.2,5.2-3.2,6.8 l-44.4,30.8v-118.8c0-2.8-1.2-5.2-3.2-6.4l-90.4-113.6h145.2c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8h-156c-0.4,0-1.2,0-1.6,0l-38.4-48     h336L209.684,211.884z"></path>
              </svg>
              <span class="filter-text text">Filter</span></span
            >
          </div>
        </div>
        <div class="toolbar-wrapper scroll-trigger animate--slide-in">
          <div class="results-count">
            <span class="results" style="display: none;"><span class="count">9</span> results</span>
          </div>
          <div class="toolbar-col toolbar-colRight">
            <div class="toolbar-item toolbar-limitView clearfix" data-limited-view="">
              <label class="toolbar-label">Items per page</label>
              <div class="toolbar-dropdown limited-view hidden-on-mobile">
                <div class="label-tab" data-toggle="dropdown" aria-expanded="false" role="button" tabindex="0">
                  <span class="label-text" name="paginateBy">20 </span>
                  <span class="halo-icon-dropdown icon-dropdown" role="none"></span>
                </div>
                <ul class="dropdown-menu list-unstyled hidden-on-mobile">
                  <li data-limited-view-item=""><span class="text" data-value="10">10</span></li>
                  <li data-limited-view-item=""><span class="text" data-value="15">15</span></li>
                  <li data-limited-view-item="" class="is-active"><span class="text" data-value="20">20</span></li>
                  <li data-limited-view-item=""><span class="text" data-value="25">25</span></li>
                  <li data-limited-view-item=""><span class="text" data-value="30">30</span></li>
                  <li data-limited-view-item=""><span class="text" data-value="50">50</span></li>
                </ul>
              </div>
            </div>
            <div class="toolbar-item toolbar-sort clearfix" data-sorting="">
              <label class="toolbar-label" data-ur="">Sort by</label>
              <div class="toolbar-dropdown filter-sortby">
                <div
                  class="label-tab hidden-on-mobile"
                  data-toggle="dropdown"
                  aria-expanded="false"
                  role="button"
                  tabindex="0"
                >
                  <span class="label-text">Alphabetically, A-Z</span
                  ><span class="halo-icon-dropdown icon-dropdown" role="none"></span>
                </div>
                <ul class="dropdown-menu list-unstyled hidden-on-mobile">
                  <li data-sort-by-item="">
                    <span class="text" data-href="manual" data-value="manual">Featured</span>
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="best-selling" data-value="best-selling">Best selling</span>
                  </li>
                  <li class="is-active" data-sort-by-item="">
                    <span class="text" data-href="title-ascending" data-value="title-ascending"
                      >Alphabetically, A-Z</span
                    >
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="title-descending" data-value="title-descending"
                      >Alphabetically, Z-A</span
                    >
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="price-ascending" data-value="price-ascending"
                      >Price, low to high</span
                    >
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="price-descending" data-value="price-descending"
                      >Price, high to low</span
                    >
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="created-ascending" data-value="created-ascending"
                      >Date, old to new</span
                    >
                  </li>
                  <li data-sort-by-item="">
                    <span class="text" data-href="created-descending" data-value="created-descending"
                      >Date, new to old</span
                    >
                  </li>
                </ul>
                <div
                  class="label-tab hidden-on-desktop"
                  data-mobile="mobile"
                  data-toggle="dropdown"
                  aria-expanded="false"
                >
                  <span class="label-text">Sort</span>
                  <span class="halo-icon-dropdown icon-dropdown" role="none"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="toolbar-wrapper toolbar-mobile scroll-trigger animate--slide-in"></div>

        <div class="dropdown-menu hidden-on-desktop" data-sorting="" data-mobile="mobile">
          <div class="dropdown-menu-header">
            <h2 class="dropdown-menu-title"><span class="text">Sort by:</span></h2>
            <div class="icon-wrapper">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.0"
                viewBox="0 0 256.000000 256.000000"
                preserveAspectRatio="xMidYMid meet"
                class="close-mobile-modal"
              >
                <g transform="translate(0.000000,256.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"><path d="M34 2526 c-38 -38 -44 -76 -18 -116 9 -14 265 -274 568 -577 l551 -553 -551 -553 c-303 -303 -559 -563 -568 -577 -26 -40 -20 -78 18 -116 38 -38 76 -44 116 -18 14 9 274 265 578 568 l552 551 553 -551 c303 -303 563 -559 577 -568 40 -26 78 -20 116 18 38 38 44 76 18 116 -9 14 -265 274 -568 578 l-551 552 551 553 c303 303 559 563 568 577 26 40 20 78 -18 116 -38 38 -76 44 -116 18 -14 -9 -274 -265 -577 -568 l-553 -551 -552 551 c-304 303 -564 559 -578 568 -40 26 -78 20 -116 -18z"></path></g>
              </svg>
            </div>
          </div>
          <ul class="dropdown-menu-body list-unstyled">
            <li data-sort-by-item=""><span class="text" data-href="manual" data-value="manual">Featured</span></li>
            <li data-sort-by-item="">
              <span class="text" data-href="best-selling" data-value="best-selling">Best selling</span>
            </li>
            <li class="is-active" data-sort-by-item="">
              <span class="text" data-href="title-ascending" data-value="title-ascending">Alphabetically, A-Z</span>
            </li>
            <li data-sort-by-item="">
              <span class="text" data-href="title-descending" data-value="title-descending">Alphabetically, Z-A</span>
            </li>
            <li data-sort-by-item="">
              <span class="text" data-href="price-ascending" data-value="price-ascending">Price, low to high</span>
            </li>
            <li data-sort-by-item="">
              <span class="text" data-href="price-descending" data-value="price-descending">Price, high to low</span>
            </li>
            <li data-sort-by-item="">
              <span class="text" data-href="created-ascending" data-value="created-ascending">Date, old to new</span>
            </li>
            <li data-sort-by-item="">
              <span class="text" data-href="created-descending" data-value="created-descending">Date, new to old</span>
            </li>
          </ul>
        </div>
      </toolbar-item>
    </collection-filters-form>
  </div>
{%- endif -%}
{%- if sidebar_type == 'vertical' -%}
  {%- for block in section.blocks -%}
    {%- if block.type == 'recent_post' -%}
      {% render 'halo-side-recent-post',
        block: block,
        show_collapse: show_collapse,
        sidebar_collapse: sidebar_collapse
      %}
    {%- elsif block.type == 'recent_tag' -%}
      {% render 'halo-side-recent-tag',
        block: block,
        show_collapse: show_collapse,
        sidebar_collapse: sidebar_collapse
      %}
    {%- elsif block.type == 'product_block' -%}
      {%- assign position = block.settings.position -%}
      {%- if position != 'content' -%}
        {% render 'halo-side-product-block',
          block: block,
          show_collapse: show_collapse,
          sidebar_collapse: sidebar_collapse,
          position: position
        %}
      {%- endif -%}
    {%- elsif block.type == 'image' -%}
      {% render 'halo-side-image', block: block, show_collapse: show_collapse, sidebar_collapse: sidebar_collapse %}
    {%- elsif block.type == 'text' -%}
      {% render 'halo-side-custom-text',
        block: block,
        show_collapse: show_collapse,
        sidebar_collapse: sidebar_collapse
      %}
    {%- endif -%}
  {%- endfor -%}
{%- endif -%}
{%- if show_filter -%}
  <script src="{{ 'collection-filters-form.js' | asset_url }}" defer="defer"></script>
{%- endif -%}
